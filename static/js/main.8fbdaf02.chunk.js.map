{"version":3,"sources":["services/wallet.js","utils/currency.js","models/wallet.js","plugins/loading.js","store.js","GlobalStyle.js","utils/theme.js","components/IconButton/styled.js","components/IconButton/index.js","containers/Wallet/styled.js","containers/Wallet/WalletSlide/styled.js","containers/Wallet/WalletSlide/index.js","containers/Wallet/index.js","services/rate.js","utils/useRates.js","containers/Exchange/styled.js","components/CurrencyInput/styled.js","components/CurrencyInput/index.js","containers/Exchange/ExchangeSlide/styled.js","containers/Exchange/ExchangeSlide/index.js","containers/Exchange/index.js","containers/Router.js","App.js","serviceWorker.js","index.js"],"names":["MOCK_BALANCE","GBP","EUR","USD","pause","ms","Promise","resolve","setTimeout","getBalance","userId","a","exchange","fromCode","toCode","fromAmount","toAmount","currencies","code","symbol","description","currencyCodes","Object","keys","getCodeIndex","indexOf","getCodeSymbol","currency","trimNumber","value","maxDigits","Number","toFixed","formatMoney","formatRate","base","rates","rate","state","Immutable","from","showExchange","currentCode","balance","reducers","payload","merge","hideExchange","setCurrentCode","updateBalance","effects","loadBalance","wallet","this","createLoadingAction","toggle","name","action","createErrorAction","failed","error","store","init","redux","devtoolOptions","disabled","process","actionSanitizer","type","startsWith","replace","models","plugins","config","loading","start","success","fail","onModel","modelActions","dispatch","forEach","isEffect","actionType","whitelist","includes","blacklist","origEffect","effectWrapper","meta","args","effectResult","ignore","__CANCEL__","window","newrelic","noticeError","throwlist","createLoadingPlugin","GlobalStyle","createGlobalStyle","normalize","boolean","prop","style","props","colors","primary","primaryActive","white","light","Wrapper","styled","button","css","Circle","div","size","Svg","svg","Label","label","IconButton","forwardRef","ref","children","icon","iconSize","rest","as","displayName","propTypes","PropTypes","string","elementType","isRequired","number","bool","ActionBar","Error","Description","Balance","Item","WalletSlide","onChange","handleChange","useCallback","idx","wrapAround","slideIndex","cellAlign","transitionMode","slideWidth","zoomScale","afterSlide","renderCenterLeftControls","renderCenterRightControls","map","key","Exchange","useSelector","useDispatch","useEffect","Plus","RefreshCw","onClick","ArrowRight","CancelToken","axios","source","cancelGetRates","cancel","getRates","symbols","get","params","app_id","cancelToken","token","response","data","useRates","initial","useRef","useState","setData","interval","current","callback","setInterval","clearInterval","Header","HeaderLeft","HeaderRight","Button","RateDropdown","Input","input","normalizeValue","toString","CurrencyInput","_value","maxValue","prefix","prevValue","setValue","e","target","test","isValidInput","undefined","handleBlur","length","substr","onBlur","variants","to","Code","Text","ExchangeSlide","direction","baseCode","targetCode","onFocus","onCodeChange","isSource","dragging","isCurrent","autoFocus","savingExchange","setFromCode","nextIdx","getNextCode","setToCode","setDirection","amount","setAmount","maxFromAmount","maxToAmount","hideRate","exchangeDisabled","handleFromCodeChange","handleToCodeChange","handleFromFocus","handleToFocus","handleExchange","Router","Wallet","App","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.8fbdaf02.chunk.js","sourcesContent":["const MOCK_BALANCE = {\n  GBP: 100,\n  EUR: 50,\n  USD: 0,\n};\n\nconst pause = ms => new Promise(resolve => setTimeout(resolve, ms));\n\nexport const getBalance = async userId => {\n  await pause(300);\n  return MOCK_BALANCE;\n};\n\nexport const exchange = async ({ fromCode, toCode, fromAmount, toAmount }) => {\n  MOCK_BALANCE[fromCode] -= fromAmount;\n  MOCK_BALANCE[toCode] += toAmount;\n\n  await pause(150);\n  return MOCK_BALANCE;\n};\n","export const currencies = {\n  GBP: {\n    code: 'GBP',\n    symbol: '£',\n    description: 'British Pound',\n  },\n  EUR: {\n    code: 'EUR',\n    symbol: '€',\n    description: 'Euro',\n  },\n  USD: {\n    code: 'USD',\n    symbol: '$',\n    description: 'American Dollar',\n  },\n};\n\nexport const currencyCodes = Object.keys(currencies);\n\nexport const getCodeIndex = code => currencyCodes.indexOf(code);\n\nexport const getNextCode = code => {\n  const idx = getCodeIndex(code);\n  let nextIdx = idx + 1;\n  if (nextIdx >= currencyCodes.length) nextIdx = 0;\n\n  return currencyCodes[nextIdx];\n};\n\nexport const getCodeSymbol = code => {\n  const currency = currencies[code];\n  return currency ? currency.symbol : '';\n};\n\n// trim trailing zeros\nexport const trimNumber = (value, maxDigits = 2) => {\n  return Number(value.toFixed(maxDigits));\n};\n\nexport const formatMoney = (code, value) => {\n  return `${getCodeSymbol(code)}${trimNumber(value)}`;\n};\n\nexport const formatRate = (base, code, rates) => {\n  if (!rates || !rates[code] || !rates[code]) return '';\n\n  const rate = rates[code] / rates[base];\n  const value = trimNumber(rate, 4);\n  return `${getCodeSymbol(base)}1 = ${getCodeSymbol(code)}${value}`;\n};\n","import Immutable from 'seamless-immutable';\n\nimport { getBalance, exchange } from 'services/wallet';\nimport { currencyCodes } from 'utils/currency';\n\nexport default {\n  state: Immutable.from({\n    showExchange: false,\n    currentCode: currencyCodes[0],\n    balance: null,\n  }),\n  reducers: {\n    showExchange(state, payload) {\n      return state.merge({ showExchange: true });\n    },\n    hideExchange(state, payload) {\n      return state.merge({ showExchange: false });\n    },\n    setCurrentCode(state, currentCode) {\n      return state.merge({ currentCode });\n    },\n    updateBalance(state, balance) {\n      return state.merge({ balance });\n    },\n  },\n  effects: {\n    async loadBalance(payload, { wallet }) {\n      const balance = await getBalance();\n\n      this.updateBalance(balance);\n    },\n    async exchange(payload, { wallet }) {\n      const balance = await exchange(payload);\n\n      this.updateBalance(balance);\n      this.hideExchange();\n    },\n  },\n};\n","const createLoadingAction = toggle => (state, { name, action }) => {\n  return {\n    ...state,\n    [name]: {\n      ...state[name],\n      [action]: toggle,\n    },\n  };\n};\n\nconst createErrorAction = failed => (state, { name, action, error }) => {\n  return {\n    ...state,\n    [name]: {\n      ...state[name],\n      [action]: failed ? error : null,\n    },\n  };\n};\n\nexport default (config = {}) => {\n  const loading = {\n    name: 'loading',\n    reducers: {\n      start: createLoadingAction(true),\n      success: createLoadingAction(false),\n      fail: createLoadingAction(false),\n    },\n    state: {},\n  };\n\n  const error = {\n    name: 'error',\n    reducers: {\n      'loading/start': createErrorAction(false),\n      'loading/success': createErrorAction(false),\n      'loading/fail': createErrorAction(true),\n    },\n    state: {},\n  };\n\n  return {\n    config: {\n      models: {\n        loading,\n        error,\n      },\n    },\n    onModel({ name }) {\n      // do not run dispatch on 'loading' and 'error' model\n      if (name === 'loading' || name === 'error') return;\n\n      loading.state[name] = {};\n      error.state[name] = {};\n      const modelActions = this.dispatch[name];\n\n      Object.keys(modelActions).forEach(action => {\n        if (!this.dispatch[name][action].isEffect) return;\n\n        loading.state[name][action] = false;\n        error.state[name][action] = null;\n        const actionType = `${name}/${action}`;\n        // ignore items not in whitelist\n        if (config.whitelist && !config.whitelist.includes(actionType)) return;\n        // ignore items in blacklist\n        if (config.blacklist && config.blacklist.includes(actionType)) return;\n\n        const origEffect = this.dispatch[name][action];\n        const effectWrapper = async (payload, meta, ...args) => {\n          try {\n            this.dispatch.loading.start({ name, action });\n            const effectResult = await origEffect(payload, meta, ...args);\n            this.dispatch.loading.success({ name, action });\n            return effectResult;\n          } catch (err) {\n            if (err.ignore) return null;\n\n            this.dispatch.loading.fail({\n              name,\n              action,\n              error: err,\n              meta,\n            });\n\n            if (err.__CANCEL__) return null;\n            if (window.newrelic) window.newrelic.noticeError(error);\n            if (process.env.NODE_ENV !== 'production') console.error(err);\n            if (config.throwlist && config.throwlist.includes(actionType))\n              throw err;\n            return null;\n          }\n        };\n        effectWrapper.isEffect = true;\n        this.dispatch[name][action] = effectWrapper;\n      });\n    },\n  };\n};\n","import { init } from '@rematch/core';\n\nimport * as models from 'models';\nimport createLoadingPlugin from 'plugins/loading';\n\nconst store = init({\n  redux: {\n    devtoolOptions: {\n      name: 'Exchange Demo',\n      disabled: process.env.NODE_ENV === 'production',\n      actionSanitizer: action => {\n        if (!action.type.startsWith('loading/')) return action;\n\n        // replace display action type for debug\n        const type = action.type.replace(\n          'loading/',\n          `${action.payload.name}/${action.payload.action}@`\n        );\n        return { ...action, type };\n      },\n    },\n  },\n  models,\n  plugins: [createLoadingPlugin()],\n});\n\nexport default store;\n","import { createGlobalStyle } from 'styled-components';\nimport { normalize } from 'styled-normalize';\n\nexport const GlobalStyle = createGlobalStyle`\n  ${normalize};\n\n  *,\n  *:before,\n  *:after {\n    box-sizing: border-box;\n  }\n  \n  body {\n    margin: 0;\n    padding: 0;\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", \"Oxygen\",\n      \"Ubuntu\", \"Cantarell\", \"Fira Sans\", \"Droid Sans\", \"Helvetica Neue\",\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  .slider {\n    .paging-dot circle {\n      fill: white !important;\n    }\n\n    .slider-list {\n      margin: 0 !important;\n    }\n  }\n`;\n\nexport default GlobalStyle;\n","export const variant = (prop, variants) => props => variants[props[prop]];\nexport const boolean = (prop, style) => props => props[prop] && style;\n\nexport const colors = {\n  primary: '#3b7afa',\n  primaryActive: '#1c4eb3',\n  white: '#fff',\n  light: 'rgba(255,255,255,0.6)',\n};\n\nexport default {\n  colors,\n};\n","import styled, { css } from 'styled-components';\n\nimport { boolean, colors } from 'utils/theme';\n\nexport const Wrapper = styled.button`\n  background: transparent;\n  border: none;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  ${boolean(\n    'disabled',\n    css`\n      opacity: 0.6;\n    `\n  )}\n`;\n\nexport const Circle = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #2e6cdd;\n  width: ${props => props.size}px;\n  height: ${props => props.size}px;\n  border-radius: 50%;\n  border: 1px solid ${colors.light};\n`;\n\nexport const Svg = styled.svg`\n  color: ${colors.white};\n`;\n\nexport const Label = styled.label`\n  color: ${colors.light};\n  font-size: 14px;\n  margin-top: 10px;\n`;\n","import React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Wrapper, Circle, Svg, Label } from './styled';\n\nconst IconButton = forwardRef(\n  ({ children, icon, iconSize = 48, disabled, ...rest }, ref) => (\n    <Wrapper {...rest} ref={ref} disabled={disabled}>\n      <Circle size={iconSize}>\n        <Svg as={icon} />\n      </Circle>\n      {children && <Label>{children}</Label>}\n    </Wrapper>\n  )\n);\n\nIconButton.displayName = 'IconButton';\nIconButton.propTypes = {\n  children: PropTypes.string,\n  icon: PropTypes.elementType.isRequired,\n  iconSize: PropTypes.number,\n  disabled: PropTypes.bool,\n};\n\nexport default IconButton;\n","import styled from 'styled-components';\n\nimport { colors } from 'utils/theme';\n\nexport const Wrapper = styled.div`\n  background-color: ${colors.primary};\n`;\n\nexport const ActionBar = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  padding: 20px;\n`;\n\nexport const Error = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ${colors.primary};\n  color: ${colors.white};\n  font-size: 16px;\n  width: 100vw;\n  height: 100vh;\n`;\n","import styled from 'styled-components';\n\nimport { colors } from 'utils/theme';\n\nexport const Description = styled.div`\n  color: ${colors.light};\n  font-size: 16px;\n`;\n\nexport const Wrapper = styled.div`\n  height: 300px;\n\n  li {\n    :not(.slide-current) {\n      ${Description} {\n        display: none;\n      }\n    }\n  }\n`;\n\nexport const Balance = styled.div`\n  color: ${colors.white};\n  font-size: 32px;\n  margin: 30px;\n`;\n\nexport const Item = styled.div`\n  height: 240px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-end;\n`;\n","import React, { useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport Carousel from 'nuka-carousel';\n\nimport {\n  currencies,\n  currencyCodes,\n  getCodeIndex,\n  formatMoney,\n} from 'utils/currency';\nimport { Wrapper, Item, Balance, Description } from './styled';\n\nconst WalletSlide = ({\n  currentCode = currencyCodes[0],\n  balance,\n  onChange,\n  ...rest\n}) => {\n  const handleChange = useCallback(\n    idx => {\n      onChange && onChange(currencyCodes[idx]);\n    },\n    [onChange]\n  );\n\n  return (\n    <Wrapper {...rest}>\n      <Carousel\n        wrapAround\n        slideIndex={getCodeIndex(currentCode)}\n        cellAlign=\"center\"\n        transitionMode=\"scroll3d\"\n        slideWidth={0.6}\n        zoomScale={0.6}\n        afterSlide={handleChange}\n        renderCenterLeftControls={null}\n        renderCenterRightControls={null}\n      >\n        {currencyCodes.map(code => (\n          <Item key={code}>\n            <Balance>\n              {balance ? formatMoney(code, balance[code]) : '--'}\n            </Balance>\n            <Description>\n              {code} - {currencies[code].description}\n            </Description>\n          </Item>\n        ))}\n      </Carousel>\n    </Wrapper>\n  );\n};\n\nWalletSlide.propTypes = {\n  currentCode: PropTypes.string,\n  balance: PropTypes.object,\n  onChange: PropTypes.func,\n};\n\nexport default WalletSlide;\n","import React, { useEffect } from 'react';\nimport IconButton from 'components/IconButton';\nimport { Plus, RefreshCw, ArrowRight } from 'react-feather';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { Wrapper, ActionBar, Error } from './styled';\nimport WalletSlide from './WalletSlide';\n\nconst Exchange = ({ showExchange, ...rest }) => {\n  const [currentCode, balance, loading, error] = useSelector(state => [\n    state.wallet.currentCode,\n    state.wallet.balance,\n    state.loading.wallet.loadBalance,\n    state.error.wallet.loadBalance,\n  ]);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch.wallet.loadBalance();\n  }, [dispatch]);\n\n  if (error) {\n    return <Error>Load balance failed</Error>;\n  }\n\n  return (\n    <Wrapper>\n      <WalletSlide\n        balance={balance}\n        currentCode={currentCode}\n        onChange={dispatch.wallet.setCurrentCode}\n      />\n      <ActionBar>\n        <IconButton icon={Plus} disabled>\n          Top Up\n        </IconButton>\n        <IconButton\n          icon={RefreshCw}\n          disabled={loading}\n          onClick={dispatch.wallet.showExchange}\n        >\n          Exchange\n        </IconButton>\n        <IconButton icon={ArrowRight} disabled>\n          Bank\n        </IconButton>\n      </ActionBar>\n    </Wrapper>\n  );\n};\n\nexport default Exchange;\n","import axios from 'axios';\n\nconst CancelToken = axios.CancelToken;\nlet source = CancelToken.source();\n\nexport const cancelGetRates = (...args) => {\n  source.cancel(...args);\n  source = CancelToken.source();\n};\n\nexport const getRates = async (symbols = 'GBP,EUR,USD') => {\n  const response = await axios.get(\n    'https://openexchangerates.org/api/latest.json',\n    {\n      params: {\n        app_id: '9356d23d12ab4998b467db1492e3fec7',\n        symbols,\n      },\n      cancelToken: source.token,\n    }\n  );\n\n  return response.data.rates;\n};\n","import { useRef, useState, useEffect } from 'react';\n\nimport { getRates, cancelGetRates } from 'services/rate';\n\nconst TIMEOUT = 10 * 1000;\n\nconst useRates = () => {\n  const initial = useRef(true);\n  const [data, setData] = useState({\n    loading: true,\n    rates: null,\n    error: null,\n  });\n\n  useEffect(() => {\n    let interval;\n    if (initial.current) {\n      const callback = async () => {\n        // cancel pending request\n        cancelGetRates();\n        try {\n          const rates = await getRates();\n          // TODO: we could avoid triggering re-render if rates stays the same\n          setData({\n            loading: false,\n            rates,\n            error: null,\n          });\n        } catch (error) {\n          setData({\n            loading: false,\n            rates: null,\n            error,\n          });\n\n          // TODO: if failed to fetch rates, retry immediately\n          // clearInterval(interval);\n          // interval = setInterval(callback, TIMEOUT);\n          // callback();\n        }\n      };\n\n      interval = setInterval(callback, TIMEOUT);\n      callback();\n      initial.current = false;\n    }\n\n    return () => {\n      cancelGetRates();\n      clearInterval(interval);\n    };\n  }, [setData]);\n\n  return data;\n};\n\nexport default useRates;\n","import styled, { css } from 'styled-components';\n\nimport { boolean, colors } from 'utils/theme';\n\nexport const Wrapper = styled.div`\n  background-color: ${colors.primary};\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n`;\n\nexport const Header = styled.div`\n  background-color: ${colors.primary};\n  height: 70px;\n  padding: 30px 0 10px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nexport const HeaderLeft = styled.div`\n  flex: 1;\n`;\n\nexport const HeaderRight = styled.div`\n  flex: 1;\n  text-align: right;\n`;\n\nexport const Button = styled.button`\n  border: none;\n  background-color: transparent;\n  color: ${colors.white};\n  padding: 5px 10px;\n\n  ${boolean(\n    'disabled',\n    css`\n      color: ${colors.light};\n    `\n  )}\n`;\n\nexport const RateDropdown = styled.button`\n  background-color: ${colors.primaryActive};\n  color: ${colors.white};\n  border: 1px solid ${colors.light};\n  border-radius: 5px;\n  padding: 5px;\n`;\n","import styled from 'styled-components';\n\nimport { colors } from 'utils/theme';\n\nexport const Input = styled.input`\n  background-color: transparent;\n  color: ${colors.white};\n  border: none;\n  outline: none;\n  text-align: right;\n`;\n","import React, {\n  forwardRef,\n  useRef,\n  useState,\n  useCallback,\n  useEffect,\n} from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Input } from './styled';\n\nconst isValidInput = input => input === '' || /^\\d+\\.?\\d{0,2}$/.test(input);\nconst normalizeValue = value => (value ? value.toString() : '');\n\nconst CurrencyInput = forwardRef(\n  ({ value: _value, maxValue, prefix = '', onChange, ...rest }, ref) => {\n    const prevValue = useRef(_value);\n    const [value, setValue] = useState(normalizeValue(_value));\n    const handleChange = useCallback(\n      e => {\n        const input = e.target.value.replace(prefix, '');\n\n        if (isValidInput(input)) {\n          const value = Number(input);\n          if (maxValue !== undefined && value > maxValue) return;\n\n          setValue(input);\n          onChange && onChange(Number(value));\n        }\n      },\n      [prefix, maxValue, setValue, onChange]\n    );\n\n    const handleBlur = useCallback(() => {\n      if (Number(value) === 0) {\n        setValue('');\n      } else if (value[value.length - 1] === '.') {\n        setValue(value.substr(0, value.length - 1));\n      }\n    }, [value]);\n\n    useEffect(() => {\n      if (prevValue.current !== _value) {\n        setValue(normalizeValue(_value));\n        prevValue.current = _value;\n      }\n    }, [prevValue, _value]);\n\n    return (\n      <Input\n        {...rest}\n        ref={ref}\n        value={value === '' ? '' : `${prefix}${value}`}\n        onChange={handleChange}\n        onBlur={handleBlur}\n      />\n    );\n  }\n);\n\nCurrencyInput.displayName = 'CurrencyInput';\nCurrencyInput.propTypes = {\n  value: PropTypes.number,\n  maxValue: PropTypes.number,\n  prefix: PropTypes.string,\n  onChange: PropTypes.func,\n};\n\nexport default CurrencyInput;\n","import styled, { css } from 'styled-components';\n\nimport CurrencyInput from 'components/CurrencyInput';\nimport { variant, colors } from 'utils/theme';\n\nexport const Wrapper = styled.div`\n  height: 200px;\n\n  ${variant('direction', {\n    from: css`\n      background-color: ${colors.primary};\n      position: relative;\n\n      &::after {\n        position: absolute;\n        left: 50%;\n        bottom: 0;\n        content: '';\n        display: block;\n        width: 0;\n        height: 0;\n        border-style: solid;\n        border-width: 16px 16px 0;\n        border-color: ${colors.primary} transparent\n          transparent;\n        transform: translateX(-50%) translateY(100%);\n      }\n    `,\n    to: css`\n      background-color: #1c4eb3;\n    `,\n  })}\n`;\n\nexport const Item = styled.div`\n  padding: 30px;\n`;\n\nexport const Label = styled.label`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 80px;\n`;\n\nexport const Code = styled.div`\n  width: 40%;\n  color: ${colors.white};\n  font-size: 36px;\n  padding-right: 10px;\n`;\n\nexport const Input = styled(CurrencyInput)`\n  width: 60%;\n  color: ${colors.white};\n  font-size: 36px;\n`;\n\nexport const Balance = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background-color: transparent;\n  padding: 10px 0;\n`;\n\nexport const Text = styled.div`\n  color: ${colors.light};\n  font-size: 16px;\n`;\n","import React, { useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport Carousel from 'nuka-carousel';\n\nimport {\n  currencyCodes,\n  getCodeIndex,\n  formatMoney,\n  formatRate,\n} from 'utils/currency';\nimport { Wrapper, Item, Label, Code, Input, Balance, Text } from './styled';\n\nconst ExchangeSlide = ({\n  direction = 'from',\n  balance,\n  rates,\n  baseCode,\n  targetCode,\n  value,\n  maxValue,\n  disabled,\n  onFocus,\n  onChange,\n  onCodeChange,\n  ...rest\n}) => {\n  const handleChange = useCallback(\n    idx => {\n      onCodeChange && onCodeChange(currencyCodes[idx]);\n    },\n    [onCodeChange]\n  );\n\n  const isSource = direction === 'from';\n  const slideIndex = getCodeIndex(baseCode);\n  return (\n    <Wrapper direction={direction} {...rest}>\n      <Carousel\n        wrapAround\n        dragging={false}\n        slideIndex={slideIndex}\n        afterSlide={handleChange}\n        renderCenterLeftControls={null}\n        renderCenterRightControls={null}\n      >\n        {currencyCodes.map(code => {\n          const isCurrent = code === baseCode;\n\n          return (\n            <Item key={code}>\n              <Label>\n                <Code>{code}</Code>\n                {isCurrent && !!rates && (\n                  <Input\n                    autoFocus={isSource}\n                    disabled={disabled}\n                    value={value}\n                    maxValue={maxValue}\n                    prefix={isSource ? '-' : '+'}\n                    onChange={onChange}\n                    onFocus={onFocus}\n                  />\n                )}\n              </Label>\n              <Balance>\n                <Text>You have {formatMoney(code, balance[code])}</Text>\n                {!isSource && baseCode !== targetCode && (\n                  <Text>{formatRate(code, targetCode, rates)}</Text>\n                )}\n              </Balance>\n            </Item>\n          );\n        })}\n      </Carousel>\n    </Wrapper>\n  );\n};\n\nExchangeSlide.propTypes = {\n  direction: PropTypes.oneOf(['from', 'to']),\n  balance: PropTypes.object,\n  rates: PropTypes.object,\n  baseCode: PropTypes.string.isRequired,\n  targetCode: PropTypes.string.isRequired,\n  value: PropTypes.number,\n  maxValue: PropTypes.number,\n  onFocus: PropTypes.func,\n  onChange: PropTypes.func,\n  onCodeChange: PropTypes.func,\n};\n\nexport default ExchangeSlide;\n","import React, { useState, useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { getNextCode, formatRate, trimNumber } from 'utils/currency';\nimport useRates from 'utils/useRates';\n\nimport {\n  Wrapper,\n  Header,\n  Button,\n  RateDropdown,\n  HeaderLeft,\n  HeaderRight,\n} from './styled';\nimport ExchangeSlide from './ExchangeSlide';\n\nconst Exchange = () => {\n  const [currentCode, balance, savingExchange] = useSelector(state => [\n    state.wallet.currentCode,\n    state.wallet.balance,\n    state.loading.wallet.exchange,\n  ]);\n  const [fromCode, setFromCode] = useState(currentCode);\n  const [toCode, setToCode] = useState(getNextCode(currentCode));\n  const [direction, setDirection] = useState('from');\n  const [amount, setAmount] = useState(0);\n  const { rates, loading, error } = useRates();\n  const dispatch = useDispatch();\n\n  const rate = rates ? rates[toCode] / rates[fromCode] : 1;\n  const maxFromAmount = balance[fromCode];\n  const maxToAmount = rates ? maxFromAmount * rate : 0;\n  const fromAmount = direction === 'from' ? amount : trimNumber(amount / rate);\n  const toAmount = direction === 'to' ? amount : trimNumber(amount * rate);\n\n  const hideRate = !rates || loading || error || fromCode === toCode;\n  const exchangeDisabled =\n    hideRate ||\n    fromAmount === 0 ||\n    fromAmount > maxFromAmount ||\n    savingExchange;\n\n  const handleFromCodeChange = useCallback(\n    code => {\n      setFromCode(code);\n      setAmount(0);\n    },\n    [setFromCode, setAmount]\n  );\n\n  const handleToCodeChange = useCallback(\n    code => {\n      setToCode(code);\n      setAmount(0);\n    },\n    [setToCode, setAmount]\n  );\n\n  const handleFromFocus = useCallback(() => {\n    if (direction === 'to') {\n      setDirection('from');\n      setAmount(fromAmount);\n    }\n  }, [direction, setDirection, setAmount, fromAmount]);\n\n  const handleToFocus = useCallback(() => {\n    if (direction === 'from') {\n      setDirection('to');\n      setAmount(toAmount);\n    }\n  }, [direction, setDirection, setAmount, toAmount]);\n\n  const handleExchange = useCallback(() => {\n    dispatch.wallet.exchange({ fromCode, fromAmount, toCode, toAmount });\n  }, [dispatch, fromCode, fromAmount, toCode, toAmount]);\n\n  return (\n    <Wrapper>\n      <Header>\n        <HeaderLeft>\n          <Button onClick={dispatch.wallet.hideExchange}>Cancel</Button>\n        </HeaderLeft>\n        {!hideRate && (\n          <RateDropdown>{formatRate(fromCode, toCode, rates)}</RateDropdown>\n        )}\n        <HeaderRight>\n          <Button disabled={exchangeDisabled} onClick={handleExchange}>\n            Exchange\n          </Button>\n        </HeaderRight>\n      </Header>\n      <ExchangeSlide\n        direction=\"from\"\n        balance={balance}\n        rates={rates}\n        baseCode={fromCode}\n        targetCode={toCode}\n        value={fromAmount}\n        maxValue={maxFromAmount}\n        disabled={savingExchange}\n        onFocus={handleFromFocus}\n        onChange={setAmount}\n        onCodeChange={handleFromCodeChange}\n      />\n      <ExchangeSlide\n        direction=\"to\"\n        balance={balance}\n        rates={rates}\n        baseCode={toCode}\n        targetCode={fromCode}\n        value={toAmount}\n        maxValue={maxToAmount}\n        disabled={savingExchange}\n        onFocus={handleToFocus}\n        onChange={setAmount}\n        onCodeChange={handleToCodeChange}\n      />\n    </Wrapper>\n  );\n};\n\nexport default Exchange;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport Wallet from './Wallet';\nimport Exchange from './Exchange';\n\nconst Router = () => {\n  const showExchange = useSelector(state => state.wallet.showExchange);\n\n  return (\n    <>\n      <Wallet />\n      {showExchange && <Exchange />}\n    </>\n  );\n};\n\nexport default Router;\n","import React from 'react';\nimport { Provider } from 'react-redux';\n\nimport store from './store';\nimport GlobalStyle from './GlobalStyle';\nimport Router from './containers/Router';\n\nconst App = () => (\n  <Provider store={store}>\n    <GlobalStyle />\n    <Router />\n  </Provider>\n);\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}